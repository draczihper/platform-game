<!doctype html>
<script src="code/chapter/16_game.js"></script>
<script src="code/levels.js"></script>

<link rel="stylesheet" href="css/game.css">

<body>
  <script>
    function runLevel(level, Display) {
      let display = new Display(document.body, level);
      let state = State.start(level);
      let ending = 1;
      return new Promise(resolve => {
        
      })
    }

    async function runGame(plans, Display) {
      let lives = 3;
      for (let level = 0; level < plan.length && lives > 0;) {
        console.log(`Level ${level + 1}, lives: ${lives}`);
        let status = await runLevel (new Level(plans[level]), Display);
        
        if (status == "won") level++;
        else lives--;
      }
      if (lives > 0) {
        console.log("You've won!");
      } else {
        console.log("Game over");
      }
    }
    runGame(GAME_LEVELS, DOMDisplay);

  </script>
</body>
